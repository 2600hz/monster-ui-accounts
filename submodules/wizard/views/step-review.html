{{#*inline "sectionTitle"}}
	<div class="section-title">
		{{index}}. {{label}}
		<a href="javascript:void(0)" class="help-tip" data-title="{{i18n.accountsApp.wizard.steps.general.help.edit}}" data-toggle="tooltip">
			{{telicon "edit" class="iconography-medium iconography-help"}}
		</a>
	</div>
{{/inline}}

{{#*inline "horizontalFieldPartial"}}
	<div class="flex-row-container">
		<div class="flex-item-4 field-label-horizontal">
		{{#if label}}
			{{label}}
		{{else}}
			{{tryI18n (lookupPath (lookupPath @root.i18n.accountsApp.wizard.steps i18nSectionName) "labels") i18nFieldName}}
		{{/if}}
		</div>
		<div class="flex-item-4-3 field-value-horizontal">
		{{#if hasContent}}	{{!-- Necessary to know if there is a @partial-block to render, and to avoid endless recursion --}}
			{{> @partial-block value=(lookupPath this (coalesce fieldPath i18nFieldName))}}
		{{else}}
			{{lookupPath this (coalesce fieldPath i18nFieldName)}}
		{{/if}}
		</div>
	</div>
{{/inline}}

{{#*inline "verticalFieldPartial"}}
	<div class="flex-item-4">
		<div class="field-label-vertical">
		{{#if label}}
			{{label}}
		{{else}}
			{{tryI18n (lookupPath (lookupPath @root.i18n.accountsApp.wizard.steps i18nSectionName) "labels") i18nFieldName}}
		{{/if}}
		</div>
		<div class="field-value-vertical">
		{{#if hasContent}}	{{!-- Necessary to know if there is a @partial-block to render, and to avoid endless recursion --}}
			{{> @partial-block value=(lookupPath this (coalesce fieldPath i18nFieldName))}}
		{{else}}
			{{lookupPath this (coalesce fieldPath i18nFieldName)}}
		{{/if}}
		</div>
	</div>
{{/inline}}

<div id="step_review" class="wizard-step">
	<div class="step-title">
		{{i18n.accountsApp.wizard.steps.review.title}}
	</div>

	<!-- GENERAL SETTINGS -->
	{{> sectionTitle index=1 label=i18n.accountsApp.wizard.steps.generalSettings.label}}
	<div class="section-body">
		{{> horizontalFieldPartial fieldPath="generalSettings.accountInfo.accountName" i18nSectionName="generalSettings.accountInfo" i18nFieldName="accountName"}}
		{{> horizontalFieldPartial fieldPath="generalSettings.accountInfo.accountRealm" i18nSectionName="generalSettings.accountInfo" i18nFieldName="accountRealm"}}
		{{#> horizontalFieldPartial i18nSectionName="generalSettings.accountInfo" i18nFieldName="addressLine1" hasContent=true}}
			{{generalSettings.accountInfo.addressLine1}}
			<br/>
			{{generalSettings.accountInfo.addressLine2}}
			<br/>
			{{generalSettings.accountInfo.addressLine3}}
		{{/horizontalFieldPartial}}
		{{> horizontalFieldPartial fieldPath="generalSettings.accountInfo.timezone" i18nSectionName="generalSettings.accountInfo" i18nFieldName="timezone"}}
		{{> horizontalFieldPartial fieldPath="generalSettings.accountInfo.language" i18nSectionName="generalSettings.accountInfo" i18nFieldName="language"}}
		{{#> horizontalFieldPartial label=(replaceVar i18n.accountsApp.wizard.steps.review.generalSettings.formats.accountAdminsCount generalSettings.accountAdmins.length) hasContent=true}}
			{{#each generalSettings.accountAdmins}}
				<div class="flex-row-container">
					{{> verticalFieldPartial fieldPath="fullName" i18nSectionName="review.general" i18nFieldName="fullName"}}
					{{> verticalFieldPartial fieldPath="email" i18nSectionName="general" i18nFieldName="email"}}
					{{> verticalFieldPartial fieldPath="password" i18nSectionName="generalSettings.accountAdmins" i18nFieldName="password"}}
					{{#> verticalFieldPartial fieldPath="sendMail" i18nSectionName="review.generalSettings" i18nFieldName="sendMail" hasContent=true}}
						{{#if value}}
							<div class="text-success">
								{{telicon "check--circle" class="iconography-medium"}}
								<span>{{tryI18n @root.i18n.accountsApp.wizard.steps.review.generalSettings.labels "yes"}}</span>
							</div>
						{{else}}
							<div class="text-danger">
								{{telicon "x--circle" class="iconography-medium"}}
								<span>{{tryI18n @root.i18n.accountsApp.wizard.steps.review.generalSettings.labels "no"}}</span>
							</div>
						{{/if}}
					{{/verticalFieldPartial}}
				</div>
			{{/each}}
		{{/horizontalFieldPartial}}
	</div>

	<!-- ACCOUNT CONTACTS -->
	{{> sectionTitle index=2 label=i18n.accountsApp.wizard.steps.accountContacts.label}}
	<div class="section-body">
	{{#if accountContacts.salesRep}}
		{{> horizontalFieldPartial fieldPath="accountContacts.salesRep.representative" label=i18n.accountsApp.wizard.steps.accountContacts.salesRep.title}}
		{{> horizontalFieldPartial fieldPath="accountContacts.salesRep.contractEndDate" i18nSectionName="accountContacts.salesRep" i18nFieldName="contractEndDate"}}
	{{/if}}
		{{#> horizontalFieldPartial label=i18n.accountsApp.wizard.steps.accountContacts.technicalContact.title hasContent=true}}
			<div class="flex-row-container">
				{{> verticalFieldPartial fieldPath="accountContacts.technicalContact.fullName" i18nSectionName="review.general" i18nFieldName="fullName" hasContent=false}}
				{{> verticalFieldPartial fieldPath="accountContacts.technicalContact.email" i18nSectionName="general" i18nFieldName="email" hasContent=false}}
				{{> verticalFieldPartial fieldPath="accountContacts.technicalContact.phoneNumber.userFormat" i18nSectionName="general" i18nFieldName="phoneNumber" hasContent=false}}
			</div>
		{{/horizontalFieldPartial}}
		{{#> horizontalFieldPartial label=i18n.accountsApp.wizard.steps.accountContacts.billingContact.title hasContent=true}}
			<div class="flex-row-container">
				{{> verticalFieldPartial fieldPath="accountContacts.billingContact.fullName" i18nSectionName="review.general" i18nFieldName="fullName" hasContent=false}}
				{{> verticalFieldPartial fieldPath="accountContacts.billingContact.email" i18nSectionName="general" i18nFieldName="email" hasContent=false}}
				{{> verticalFieldPartial fieldPath="accountContacts.billingContact.phoneNumber.userFormat" i18nSectionName="general" i18nFieldName="phoneNumber" hasContent=false}}
			</div>
		{{/horizontalFieldPartial}}
	</div>

	<!-- SERVICE PLAN -->
	{{> sectionTitle index=3 label=i18n.accountsApp.wizard.steps.servicePlan.label}}
	<div class="section-body">
		{{#> horizontalFieldPartial fieldPath="servicePlan.selectedPlans" i18nSectionName="review.servicePlan" i18nFieldName="selectedServicePlans" hasContent=true}}
			<div class="flex-row-container">
				<div class="flex-item-1">
					{{value}}
				</div>
			</div>
			<div class="flex-row-container">
				<div class="flex-item-1">
					<div id="service_plan_aggregate" class="flex-item-1">
					</div>
				</div>
			</div>
		{{/horizontalFieldPartial}}
	</div>
</div>
